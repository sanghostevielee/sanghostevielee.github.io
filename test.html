<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Work in progress</title>
    <meta name='description' content='Alternative Corona Map Munich'>
    <meta name='author' content='Liam, Stevie and Dasha'>
    <meta name='keywords' content='Munich, Corona, Map, Tour'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet'>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        color:#404040;
        font:400 15px/22px 'Source Sans Pro', 'Helvetica Neue', Sans-serif;
        margin:0;
        padding:0;
        -webkit-font-smoothing:antialiased;
      }

      * {
        -webkit-box-sizing:border-box;
        -moz-box-sizing:border-box;
        box-sizing:border-box;
      }

      .sidebar {
        position:absolute;
        width:33.3333%;
        height:100%;
        top:0;left:0;
        overflow:hidden;
        border-right:1px solid rgba(0,0,0,0.25);
      }
      .pad2 {
        padding:20px;
      }

      .map {
        position:absolute;
        left:33.3333%;
        width:66.6666%;
        top:0;bottom:0;
      }

      h1 {
        font-size:22px;
        margin:0;
        font-weight:400;
        line-height: 20px;
        padding: 20px 2px;
      }

      a {
        color:#404040;
        text-decoration:none;
      }

      a:hover {
        color:#101010;
      }

      .heading {
        background:#fff;
        border-bottom:1px solid #eee;
        min-height:60px;
        line-height:60px;
        padding:0 10px;
        background-color: #00853e;
        color: #fff;
      }

      .listings {
        height:100%;
        overflow:auto;
        padding-bottom:60px;
      }

      .listings .item {
        display:block;
        border-bottom:1px solid #eee;
        padding:10px;
        text-decoration:none;
      }

      .listings .item:last-child { border-bottom:none; }
      .listings .item .title {
        display:block;
        color:#00853e;
        font-weight:700;
      }

      .listings .item .title small { font-weight:400; }
      .listings .item.active .title,
      .listings .item .title:hover { color:#8cc63f; }
      .listings .item.active {
        background-color:#f8f8f8;
      }
      ::-webkit-scrollbar {
        width:3px;
        height:3px;
        border-left:0;
        background:rgba(0,0,0,0.1);
      }
      ::-webkit-scrollbar-track {
        background:none;
      }
      ::-webkit-scrollbar-thumb {
        background:#00853e;
        border-radius:0;
      }

      .marker {
        border: none;
        cursor: pointer;
        height: 56px;
        width: 56px;
        background-image: url(marker.png);
        background-color: rgba(0, 0, 0, 0);
      }

      .clearfix { display:block; }
      .clearfix:after {
        content:'.';
        display:block;
        height:0;
        clear:both;
        visibility:hidden;
      }

      /* Marker tweaks */
      .mapboxgl-popup {
        padding-bottom: 50px;
      }

      .mapboxgl-popup-close-button {
        display:none;
      }
      .mapboxgl-popup-content {
        font:400 15px/22px 'Source Sans Pro', 'Helvetica Neue', Sans-serif;
        padding:0;
        width:400px;
      }
      .mapboxgl-popup-content-wrapper {
        padding:1%;
      }
      .mapboxgl-popup-content h3 {
        background:#91c949;
        color:#fff;
        margin:0;
        display:block;
        padding:10px;
        border-radius:3px 3px 0 0;
        font-weight:700;
        margin-top:-15px;
      }

      .mapboxgl-popup-content h4 {
        margin:0;
        display:block;
        padding: 10px 10px 10px 10px;
        font-weight:400;
      }

      .mapboxgl-popup-content div {
        padding:10px;
      }

      .mapboxgl-container .leaflet-marker-icon {
        cursor:pointer;
      }

      .mapboxgl-popup-anchor-top > .mapboxgl-popup-content {
        margin-top: 15px;
      }

      .mapboxgl-popup-anchor-top > .mapboxgl-popup-tip {
        border-bottom-color: #91c949;
      }
    </style>
  </head>
  <body>
    <div class='sidebar'>
      <div class='heading'>
        <h1>Where do you feel like today?</h1>
      </div>
      <div id='listings' class='listings'></div>
    </div>
    <div id='map' class='map'></div>
    <script>
      if (!('remove' in Element.prototype)) {
        Element.prototype.remove = function() {
          if (this.parentNode) {
              this.parentNode.removeChild(this);
          }
        };
      }

      mapboxgl.accessToken = 'pk.eyJ1Ijoic2FuZ2hvc3RldmllbGVlIiwiYSI6ImNraDVjMWZzMDAyNTIycW5zbmh0dmF4eGgifQ.F0rZyhBBMALX3sMxOm81Qg';

      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/sanghostevielee/ckhqnfk9x17lp19kevkoo745a',
        center: [11.5578093 ,48.1402669],
        zoom: 12
      });

      var places = {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.630281,
                48.217751,
                0
              ]
            },
            "properties": {
              "name": "Heilig-Kreuz-Kirche",
              "description": "Catholic church in the Fröttmaning district of Munich (Germany). It is now the oldest preserved church in the city as Fröttmaning has been a part of Munich since 1931."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.53911,
                48.179007,
                0
              ]
            },
            "properties": {
              "name": "München Olympiastation",
              "description": "Abandoned station with lots of graffiti. Very \"Instagram\" place. Could be interesting for people who wanna make beautiful unusual pictures. I personally would visit this place."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.52876,
                48.1698,
                0
              ]
            },
            "properties": {
              "name": "Westfriedhof station",
              "description": "One more \"Instagram\" place. Well designed U-bahn station. There are lamps with different lightning or smth like this. Modern urban hipster place as for me."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.573108,
                48.140079,
                0
              ]
            },
            "properties": {
              "name": "Memorial site for Michael Jackson"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.566695,
                48.15059,
                0
              ]
            },
            "properties": {
              "name": "Karl Rau E. K.",
              "description": "Bookshop. But as far as I know there are tables there which can be used by customers even now during lockdown (but it has to be checked). For example, if you need look through a book. I think it can be interesting. I know that some people love spending time in such king of shops. On the other hand, question of safety is still open."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.565011,
                48.118851,
                0
              ]
            },
            "properties": {
              "name": "Rosengarten"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.569967,
                48.171114,
                0
              ]
            },
            "properties": {
              "name": "Luitpoldpark ",
              "description": "Meadows in the sun and in the shade between gingko, primeval, mammoth and god trees offer a little relaxation. Children can take a stroll through the winding hedge labyrinth or make the Pumuckl playground unsafe. The neo-baroque garden restaurant Bamberger Haus (customer side) provides you with a 3-course menu and other delicacies to go - but you have to order in advance.<br><br>And here too, it's not just children who enjoy winter. The Luitpoldhügel offers a 30 meter long slope for sledges and bobsleighs. By the way, from up there you have a fantastic view both in winter and in summer."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.69354,
                48.125574,
                0
              ]
            },
            "properties": {
              "name": "Riemer Park",
              "description": "In the past, people from Munich flew from here on vacation, now relaxation is right under their noses. The 210 hectare Riemer Park was built on the former airport site between 1997 and 2005. After its completion, the Federal Garden Show took place here in the opening year, which is why some people also know it as the BUGA Park. Today, walkers and sunbathers will find an idyllic paradise here, which has even been awarded the German landscape architecture prize. The Riemer See, which is also part of the park, provides cooling in summer."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.579444,
                48.1775,
                0
              ]
            },
            "properties": {
              "name": "Petuelpark",
              "description": "The Petuelpark, which opened in 2004, is located directly above the Mittlerer Ring between Schwabing-West and Milbertshofen. Many a motorist who is stuck in a traffic jam under the park in the tunnel certainly wishes to simply park the car and take a short break in the local recreation area for the surrounding residents. The appearance of the Petuelpark may seem surprising at first: It is 900 meters long, but only 60 meters wide.<br>Nevertheless, the green strip offers several playgrounds for children to let off steam, a football field and the Café Ludwig (customer side) for food and drinks to go. There is also art to discover here: a sculpture course as a platform for international art awaits interested visitors."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.550942,
                48.130895,
                0
              ]
            },
            "properties": {
              "name": "Theresienwiese",
              "description": "Oktoberfest place"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.543582,
                48.131014,
                0
              ]
            },
            "properties": {
              "name": "Bavariapark",
              "description": "From the Bavariapark you can usually follow the construction, the goings-on and the dismantling of the Oktoberfest live. And if you prefer it quieter, you will definitely find a secluded spot in the western part of the park. In the past only King Ludwig I was allowed to enter the Bavariapark, but since the fair moved to Riem, it has finally been accessible to everyone again. Old oak trees provide shade, children play soccer in the large meadow, mystical stone sculptures arouse curiosity."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.534332,
                48.163122,
                0
              ]
            },
            "properties": {
              "name": "Taxispark",
              "description": "Playground and fitness"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.638603,
                48.113887,
                0
              ]
            },
            "properties": {
              "name": "Ostpark",
              "description": "The park also offers a great range of leisure activities in winter. \"Off the track\" is the echo from the toboggan slope, where children rush down the hill with their sledges. In addition, an open-air ice rink awaits ice-skaters in the ice and fun sports center east. If there is enough snow, you can even strap your cross-country skis under your feet and tackle the almost three-kilometer circuit."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.574005,
                48.130562,
                0
              ]
            },
            "properties": {
              "name": "Fink's Südtiroler Knödelküche",
              "description": "Montag bis Samstag 11:30 - 14:30 Uhr und 17:30 - 19:30 Uhr Auf der Take-Away-Karte finden sich Klassiker wie Speck- oder Spinatknödel und Schlutzkrapfen aber auch ungewöhnliche Kreationen wie Rote-Beete-Knödel und vegane Sorten. Alternativ sind Knödel und Beilagen im „rohen“ Zustand auch zum Selbstkochen erhältlich."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5643935,
                48.1321211,
                0
              ]
            },
            "properties": {
              "name": "Ristorante Pizzeria Mixto",
              "description": "Auch in Corona-Zeiten müsst Ihr auf die leckeren Kreationen nicht verzichten. Das Mixto Cucina liefert Euch Italien-Flair nach Hause oder Ihr holt Euch Eure Bestellung vor Ort ab. <br>Abholangebot und Lieferservice: <br>Dienstag bis Freitag 12 -14:30 Uhr und 17:30 - 22:30 Uhr<br>Samstag, Sonntag 17:30 - 22:30 Uhr"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5766299,
                48.13382,
                0
              ]
            },
            "properties": {
              "name": "FISHBOWL Poké Gärtnerplatzviertel",
              "description": "\"Frisch, gesund, lokal\", das ist das Motto der Fishbowl, die ausschließlich nachhaltig gefangenen Fisch, lokales Hähnchen, biodynamischen Tofu und frisches Gemüse verarbeitet."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.57479,
                48.1323812,
                0
              ]
            },
            "properties": {
              "name": "Lezizel Manti - Türkische Maultaschen",
              "description": "Turkish cuisine, not kebab hahaha"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.563783,
                48.134364,
                0
              ]
            },
            "properties": {
              "name": "Max Pett... Das vegane Restaurant",
              "description": "Vagan"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5756175,
                48.1281642,
                0
              ]
            },
            "properties": {
              "name": "Hungriges Herz",
              "description": "Nice breackfests"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5781228,
                48.134597,
                0
              ]
            },
            "properties": {
              "name": "Madam Chutney",
              "description": "Indian food"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5689472,
                48.1286611,
                0
              ]
            },
            "properties": {
              "name": "Kaiser Otto",
              "description": "Obwohl Kidslounge und Lokal aktuell geschlossen bleiben, zaubert das Team wochentags weiterhin leckeres Soul-Food von der Tageskarte für Euch zum Mitnehmen. Auch Vegetarier und Veganer finden hier eine tolle Auswahl an Suppen, Salaten und Gemüsepfannen."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5720429,
                48.1290248,
                0
              ]
            },
            "properties": {
              "name": "Cordo Bar",
              "description": "Spanish food"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5664212,
                48.1315372,
                0
              ]
            },
            "properties": {
              "name": "Usagi",
              "description": "Japaneese food"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5636062,
                48.1599331,
                0
              ]
            },
            "properties": {
              "name": "Offener Bücherschrank München"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5583488,
                48.1479401,
                0
              ]
            },
            "properties": {
              "name": "Bücherschrank"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5849187,
                48.1271666,
                0
              ]
            },
            "properties": {
              "name": "Am Herrgottseck 2",
              "description": "Tolle Tipps in der Umgebung: Auch wenn die Auer Dult gerade nicht stattfindet, solltet Ihr den Mariahilfplatz samt der gleichnamigen Kirche mal besuchen. Wenn die Herbstsonne rauskommt, könnt Ihr Euch zum Schmökern natürlich auch an die nahe Isar setzen oder Ihr lauft ein paar Meter bergauf zum Kronepark gegenüber vom Nockherberg."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.531481,
                48.1564434,
                0
              ]
            },
            "properties": {
              "name": "Bücherschrank an der Ecke Ruffinistraße/Waisenhausstraße"
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.564842,
                48.1510959,
                0
              ]
            },
            "properties": {
              "name": "Kartoffelkönig",
              "description": "Vegan place in front of TUM where all menus including the sauces are vegetarian or vegan. Tofu and Halloumi are some of the common substitutes, but seitan in a kebab is definitely novel and intriguing. (Of course, they also have falafels!) Seitan strips get a solid 8/10 -- well spiced, chewy and soft. The veggies and side dishes were unseasoned which would be nice if they are eaten together with seitan -- so get a Döner or Dürüm instead of a Teller. Ca. 5 EUR for a seitan Döner/Dürüm, and 9 EUR for a Teller."
            }
          },
          {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                11.5592688,
                48.1457192,
                0
              ]
            },
            "properties": {
              "name": "Kabul Restaurant",
              "description": "You'd know this place is a bomb even if you've never been to Kabul. The jasmine rice is so light and fluffy that I would thankfully only eat the rice without any side dishes. I had an aubergine-curry (#20) and they gave me two kinds of extra sauce that were tangy and spicy. Also they were friendly and have a variety of vegetarian menus -- so 9/10. I'd definitely go again and try something else. Ca. 12 EUR for a dish that is normally served with rice."
            }
          }
        ]
      };

      /**
       * Assign a unique id to each place. This id will be later used to
       * associate each point on the map with a listing in the sidebar.
      */
      places.features.forEach(function(place, i){
        place.properties.id = i;
      });
      map.on('load', function (e) {
        /* Add the data to your map as a layer */
        map.addLayer({
          "id": "locations",
          "type": "symbol",
          /* Add a GeoJSON source containing place coordinates and information. */
          "source": {
            "type": "geojson",
            "data": places
          },
          "layout": {
            "icon-image": "circle-white-2",
            "icon-allow-overlap": true,
          }
        });
        buildLocationList(places);
      });
      function buildLocationList(data) {
        data.features.forEach(function(place, i){
          /**
          * Create a shortcut for `place.properties`,
          * which will be used several times below.
          **/
          var prop = place.properties;

          /* Add a new listing section to the sidebar. */
          var listings = document.getElementById('listings');
          var listing = listings.appendChild(document.createElement('div'));
          /* Assign a unique `id` to the listing. */
          listing.id = "listing-" + prop.id;
          /* Assign the `item` class to each listing for styling. */
          listing.className = 'item';

          /* Add the link to the individual listing created above. */
          var link = listing.appendChild(document.createElement('a'));
          link.href = '#';
          link.className = 'title';
          link.id = "link-" + prop.id;
          link.innerHTML = prop.name;

          /* Add details to the individual listing. */
          /* var details = listing.appendChild(document.createElement('div'));
          details.innerHTML = prop.description;
          } */

          /**
          * Listen to the element and when it is clicked, do four things:
          * 1. Update the `currentFeature` to the store associated with the clicked link
          * 2. Fly to the point
          * 3. Close all other popups and display popup for clicked store
          * 4. Highlight listing in sidebar (and remove highlight for all other listings)
          **/
          link.addEventListener('click', function(e){
            for (var i=0; i < data.features.length; i++) {
              if (this.id === "link-" + data.features[i].properties.id) {
                var clickedListing = data.features[i];
                flyToPlace(clickedListing);
                createPopUp(clickedListing);
              }
            }
            var activeItem = document.getElementsByClassName('active');
            if (activeItem[0]) {
              activeItem[0].classList.remove('active');
            }
            this.parentNode.classList.add('active');
          });
        });
      }

      /**
      * Use Mapbox GL JS's `flyTo` to move the camera smoothly
      * a given center point.
      **/
      function flyToPlace(currentFeature) {
        map.flyTo({
          center: currentFeature.geometry.coordinates,
          zoom: 14
        });
      }

      /**
      * Create a Mapbox GL JS `Popup`.
      **/
      function createPopUp(currentFeature) {
        var popUps = document.getElementsByClassName('mapboxgl-popup');
        if (popUps[0]) popUps[0].remove();
        var popup = new mapboxgl.Popup({closeOnClick: false})
          .setLngLat(currentFeature.geometry.coordinates)
          .setHTML('<h3>Good idea!</h3>' +
            '<h4>' + currentFeature.properties.description + '</h4>')
          .addTo(map);
      }
    </script>
  </body>
<html>
